<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BestFlowers - Elegant Catalog</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="particles"></div>
    
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <span class="flower-icon">ğŸŒ¸</span>
                <h1>BestFlowers</h1>
            </div>
            <div class="header-contact">
                <a href="tel:+919891793539" class="contact-btn phone-btn">
                    ğŸ“ +91 98917 93539
                </a>
                <a href="https://wa.me/919891793539" target="_blank" class="contact-btn whatsapp-btn">
                    ğŸ’¬ WhatsApp
                </a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h2 class="hero-title">Discover Nature's</h2>
            <h2 class="hero-title gradient-text">Finest Blooms</h2>
            <p class="hero-subtitle">Handpicked luxury flowers delivered with elegance</p>
        </div>
        <div class="hero-decoration">
            <div class="floating-flower">ğŸŒº</div>
            <div class="floating-flower">ğŸŒ¹</div>
            <div class="floating-flower">ğŸŒ·</div>
            <div class="floating-flower">ğŸŒ»</div>
            <div class="floating-flower">ğŸ’</div>
            <div class="floating-flower">ğŸµï¸</div>
        </div>
    </section>

    <!-- Flower Catalog -->
    <section class="catalog">
        <div class="container">
            <div class="catalog-header">
                <h3>Premium Collection</h3>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid">Grid</button>
                    <button class="view-btn" data-view="list">List</button>
                </div>
            </div>
            <div class="flower-grid" id="flowerGrid">
                <!-- Flowers will be dynamically added here -->
            </div>
        </div>
    </section>

    <!-- Firebase & App Script -->
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-analytics.js";
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, query, orderBy } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDEaaMDgDZ3UK4o9qBdqOiZx8gKX5k5-LU",
            authDomain: "bestflowers-test.firebaseapp.com",
            projectId: "bestflowers-test",
            storageBucket: "bestflowers-test.firebasestorage.app",
            messagingSenderId: "59558482984",
            appId: "1:59558482984:web:592d19fa805ce21c64511d",
            measurementId: "G-HT5VYHC4XY"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // Global state
        let flowers = [];

        // Load flowers from Firestore
        async function loadFlowers() {
            try {
                const flowersQuery = query(collection(db, 'flowers'), orderBy('order', 'asc'));
                const querySnapshot = await getDocs(flowersQuery);
                flowers = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    flowers.push({ 
                        id: doc.id, 
                        name: data.name || '',
                        emoji: data.emoji || 'ğŸŒ¸',
                        color: data.color || '',
                        price: data.price || 0,
                        description: data.description || '',
                        order: data.order || 0,
                        imageBase64: data.imageBase64 || null
                    });
                });
                renderFlowers();
            } catch (error) {
                console.error("Error loading flowers:", error);
                showNotification('Error loading flowers', 'error');
            }
        }

        // Render flowers
        function renderFlowers() {
            const flowerGrid = document.getElementById('flowerGrid');
            flowerGrid.innerHTML = '';
            flowers.forEach((flower, index) => {
                const flowerCard = createFlowerCard(flower, index);
                flowerGrid.appendChild(flowerCard);
            });

            document.querySelectorAll('.flower-card').forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        }

        // Create flower card (user view - compact with image and price only)
        function createFlowerCard(flower, index) {
            const card = document.createElement('div');
            card.className = 'flower-card flower-card-compact';
            card.style.cursor = 'pointer';
            
            const imageOrEmoji = flower.imageBase64 
                ? `<div class="flower-image-large"><img src="${flower.imageBase64}" alt="${flower.name}"></div>`
                : `<div class="flower-emoji-large">${flower.emoji || 'ğŸŒ¸'}</div>`;
            
            card.innerHTML = `
                ${imageOrEmoji}
                <div class="flower-card-compact-footer">
                    <h3 class="flower-name-compact">${flower.name}</h3>
                    <div class="flower-price-compact">â‚¹${flower.price}</div>
                </div>
            `;

            // Click to view details
            card.addEventListener('click', () => {
                window.location.href = `/flower-details.html?id=${flower.id}`;
            });

            return card;
        }

        // View toggle
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const flowerGrid = document.getElementById('flowerGrid');
                flowerGrid.className = btn.dataset.view === 'list' ? 'flower-list' : 'flower-grid';
            });
        });

        // Create floating particles
        function createParticles() {
            const particles = document.querySelector('.particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particles.appendChild(particle);
            }
        }

        // Initialize
        createParticles();
        loadFlowers();
    </script>
</body>
</html>
